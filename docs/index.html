<!doctype html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1"><title>StaticSite</title><style>body{font-family:sans-serif;}.content{margin:40px auto;max-width:650px;line-height:1.6;font-size:18px;color:#444444;padding:10px;background-color:#eeeeee;}.topnav{overflow:hidden;background-color:#333333;}.topnav a{float:left;color:#f2f2f2;text-align:center;padding:14px 16px;text-decoration:none;font-size:17px;}.topnav a:hover{background-color:#dddddd;color:black;}.topnav a.active{background-color:#4caf50;color:white;}h1,h2,h3{line-height:1.2;}</style><style>code{background-color:#cccccc;padding:3px;}</style><link rel=stylesheet src=/staticsite/css/index.css></head> <body> <div class=topnav> <a href=/staticsite>StaticSite</a> <a href=https://github.com/theSage21/staticsite target=_blank>Github</a> <a href=# style="float: right; "></a> </div> <div class=content> <h1>StaticSite</h1> <p> An stupidly simple static site builder using <a href=https://jinja.palletsprojects.com/en/2.10.x/ target=_blank>Jinja2</a>. This current documentation is built using staticsite itself. </p> <p> Refer to the code or open an issue if something is unclear. </p> <ol> <li>Create a <b>src</b> directory.</li> <li>Create your source files in that directory.</li> <li>Run <code>python -m staticsite build</code> to build your site into the <b>docs</b> directory.</li> <li>Serve your site with <code>cd docs && python -m http.server</code> at <a href=http://localhost:8000>http://localhost:8000</a></li> </ol> <h2>Two way data binding</h2> <p> If we add two numbers X <input data-value=x> and Y <input data-value=y> the result is <span data-text=total></span> and the square of that is <span data-text=square></span>. </p> <p>You can use minimal two way data binding along with flat computed dependencies as well! Makes code a lot easier to write.</p> <h2>Folder structures</h2> <p><b>Note:</b>Files with a leading <code>.</code> are not rendered into the final site.</p> <p><b>Note:</b>A <code>.sitehash.txt</code> file is added to the final results denoting a hash for the build.</p> <pre>
.
├── src
│   ├── .autoreload.html
│   ├── .base.html
│   ├── css
│   │   └── .base.css
│   ├── .examples.html
│   └── index.html
│
└── docs
    ├── index.html
    └── .sitehash.txt
</pre> <h2>Developing the site</h2> <p> <code>python -m staticsite watch</code> keeps re-rendering your site as soon as it detects changes. </p> <p>You can then use <code>{<span></span>% include '.autoreload.html' %}</code> in your site's base tempate, which will reload your site in the browser when the source files change.</p> <p>If you build your site using <code>pyton -m staticsite build</code> then the auto reload part is not included, leaving you with a static site.</p> <h2>Adding custom processors</h2> You can add custom processors by adding them as key, value pairs in your staticsite yml file. For example the example file contains pretty_json. which renders like: <pre>
{
  "a": {
    "b": {
      "c": {
        "d": 10
      }
    }
  }
}
</pre> <script>function getDomUpdateFn(varName){return function(value){const domElements=document.querySelectorAll(`[data-value='${varName}']`);for(var j=0;j<domElements.length;++j){domElements[j].value=value};const spanElements=document.querySelectorAll(`[data-text='${varName}']`);for(j=0;j<spanElements.length;++j){spanElements[j].innerHTML=value}}};function bindToDom(obj){const keys=Object.keys(obj);let access={};let store={};let listeners={};let recordEvents=false;let events=[];for(var i=0;i<keys.length;++i){const varName=keys[i];if(typeof(obj[varName])!=='function'){access[varName]={get:function(){if(recordEvents===true){events.push({op:'get',key:varName})};return store[varName]},set:function(value){getDomUpdateFn(varName)(value);store[varName]=value;const toCall=listeners[varName];if(toCall!==undefined){let fnKeys=Object.keys(toCall);for(j=0;j<fnKeys.length;++j){const fk=fnKeys[j];const fn=toCall[fk];obj[fk]=fn(obj)}}},};access[varName].set(obj[varName]);document.addEventListener('change',function(e){if(e.target&&e.target.getAttribute('data-value')===varName){obj[varName]=e.target.value}})}};obj=Object.defineProperties(obj,access);for(i=0;i<keys.length;++i){const varName=keys[i];if(typeof(obj[varName])==='function'){events=[];recordEvents=true;let initValue=obj[varName](obj);for(j=0;j<events.length;++j){const dependency=events[j].key;if(!(dependency in listeners)){listeners[dependency]={}};if(!(varName in listeners[dependency])){listeners[dependency][varName]=obj[varName]}};access[varName]={get:function(){if(recordEvents===true){events.push({op:'get',key:varName})};return store[varName]},set:function(value){getDomUpdateFn(varName)(value);store[varName]=value;const toCall=listeners[varName];if(toCall!==undefined){let fnKeys=Object.keys(toCall);for(j=0;j<fnKeys.length;++j){const fk=fnKeys[j];const fn=toCall[fk];obj[fk]=fn(obj)}}},};access[varName].set(initValue);obj=Object.defineProperties(obj,access);}};events=[];recordEvents=false;return obj};st=bindToDom({x:10,y:2,total:function(data){return Number(data.x)+Number(data.y)},square:function(data){return Number(data.total)*Number(data.total)}})</script> </div> </body> </html>